import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'flutterkat/flutterkat.dart';
import 'flutterkat/flutterkat_theme.dart';

Future<void> main(List<String> args) async {
	// Call the initialize function from main.dart
	await flutterkatInit();
	await initialize();

	runApp(ChangeNotifierProvider<ColorTheme>(
			create: (context) => ColorTheme(),
			child: const MyApp(),
		)
	);
} // end main

Future<void> initialize() async {
	
}

Map<String, List> pageRoutes = {
	'home': ['/home', HomePage()]
};
String title = "//TODO title";

/* ========== MYAPP ========== */
class MyApp extends StatelessWidget {
	const MyApp({super.key});	
	
	// This widget is the root of your application.
	@override
	Widget build(BuildContext context) {
		// Provider.of<ColorTheme>(context).updateTheme();
		// getColorTheme(context).setColor(null);
		return MaterialApp(
			title: title,
			theme: Provider.of<ColorTheme>(context).lightTheme,
			darkTheme: Provider.of<ColorTheme>(context).darkTheme,
			themeMode: ThemeMode.system,

			home: pageRoutes['home']![1],
			// initialRoute: hasError ? flktGetErrorPage() : flktGetHomePage(),
			routes: genRoutes(pageRoutes),   
		);
	} // end build
} // end MyApp

class HomePage extends StatelessWidget {
	@override
	Widget build(BuildContext context) {
		return Text('//TODO HomePage');
	}
}